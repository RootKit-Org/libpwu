.IX Title "UTIL 3
.TH UTIL 3 "Oct 2024" "liblain v1.0.1" "util"
.\" Automatically generated by Pandoc 3.1.3
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.hy
.SS LIBRARY
.PP
Lain memory manipulation library (liblain, -llain)
.SS SYNOPSIS
.IP
.nf
\f[C]
char * ln_pathname_to_basename(char * pathname);
pid_t ln_pid_by_name(const char * basename, cm_vector * pid_vector);
int ln_name_by_pid(pid_t pid, char * name_buf);
void ln_bytes_to_hex(cm_byte * inp, int inp_len, char * out);
\f[R]
.fi
.SS STRUCTURE
.PP
\f[B]liblain\f[R] provides some utility functions.
.SS FUNCTIONS
.PP
The \f[B]ln_pathname_to_basename()\f[R] function returns a pointer to
the basename component of the provided \f[I]pathname\f[R].
.PP
The \f[B]ln_pid_by_name()\f[R] function returns an allocated vector
\f[I]pid_vector\f[R] of process IDs with a name matching
\f[I]basename\f[R].
On success, \f[I]pid_vector\f[R] must be manually deallocated with
\f[B]cm_del_vector()\f[R].
See \f[B]libcmore_vector\f[R](3).
.PP
The \f[B]ln_name_by_pid()\f[R] function stores the basename (comm)
inside \f[I]name_buf\f[R].
The name is fetched from \f[I]/proc//status\f[R] to mimic behaviour of
utilities like \f[I]top\f[R] and \f[I]ps\f[R].
.PP
The \f[B]ln_bytes_to_hex()\f[R] function converts a binary buffer
\f[I]inp\f[R] into its hexadecimal string representation, prefixed by
`0x' and stored in the \f[I]out\f[R] buffer.
Note that the length of \f[I]out\f[R] must be \f[I]inp_len\f[R] * 2 + 2.
.SS RETURN VALUES
.PP
\f[B]ln_pathname_to_basename()\f[R] returns a pointer to the basename on
success, and NULL on error.
.PP
\f[B]ln_pid_by_name()\f[R] returns the first pid in \f[I]pid_vector\f[R]
on success, and -1 on error.
.PP
\f[B]ln_name_by_pid()\f[R] returns 0 on success, and -1 on error.
.PP
On error, \f[I]ln_errno\f[R] is set.
See \f[B]liblain_error\f[R](3).
.SS EXAMPLES
.PP
See \f[I]src/test/util.c\f[R] for examples.
.SS SEE ALSO
.PP
\f[B]liblain_error\f[R](3), \f[B]liblain_iface\f[R](3),
\f[B]liblain_map\f[R](3)
